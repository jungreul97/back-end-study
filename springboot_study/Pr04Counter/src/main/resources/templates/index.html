<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<h2 id="count" th:text="|카운트 : ${ count }|"></h2>
<button type = "button" onClick="onplus()">더하기</button>
<button type = "button" onClick="onminus()">빼기</button>


<script>
    function onplus(){
            let inputNumber = document.getElementsByName("count");
        
            // fetch() : JS6에서 서버에 AJAX통신하는 함수
            fetch("http://localhost:8080/api/v1/plus",{
                method: "POST",
                header: { 'Content-Type': "application/json" }
            })
            .then((response) => {
                return response.json(); //response 응답객체에서 json만 빼서 확인한다.
            })
            .then((json) => {
                document.getElementById("count").innerText = '카운트 : ' + json.count;
            })
            .catch((error) =>{
                console.log(error);
            })
        }
    function onminus(){
        let inputNumber = document.getElementsByName("count");

        fetch("http://localhost:8080/api/v1/minus",{
            method: "POST",
            header: { 'Content-Type': "application/json" }
        })
        .then((response) => {
            return response.json(); //response 응답객체에서 json만 빼서 확인한다.
        })
        .then((json) => {
                document.getElementById("count").innerText = '카운트 : ' + json.count;
            })
        .catch((error) =>{
            console.log(error);
        })
    }

</script>
</body>
</html>